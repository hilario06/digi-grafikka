<div class="portfolios-container">
  <div class='portfolios-banner'>
    <%= image_tag("#{@portfolio.user.image}",
      class: 'portfolios-perfil') %>
    <%= image_tag("#{@portfolio.designs.sample.image}", class: 'portfolios-background') %>
  </div>
  <div class="container">
    <div class='portfolios-details'>
      <p class='designer-name text-center'><%= "#{@portfolio.user.name} #{@portfolio.user.last_name}" %></p>
      <p class='designer-description text-center'>Freelance Brand and Logo Designer</p>
      <p class='designer-location text-center'>üìç<%= " #{@portfolio.user.address}" %></p>
      <div class="content-followers-and-likes">
          <div class='followers'>
            <p class="m-0 text-center"><%= "#{@portfolio.total_followers} " %></p>
            <p class="small text-muted m-0 text-center">seguidores</p>
          </div>
          <div class='likes'>
            <p class="m-0 text-center"><%= "#{@portfolio.total_likes.round(0)} " %></p>
            <p class="small text-muted m-0 text-center">likes</p>
          </div>
        </div>
      <div class='buttons-container text-center' id="button-follower">
        <% if user_signed_in? %>
          <% if current_user == @portfolio.user %>
            <%= link_to 'Mis dise√±os', portfolio_designs_path(@portfolio), class: 'portfolios-btn' %>
            <%= link_to 'Mi Chat', chats_portfolio_path(@portfolio), class: 'portfolios-btn' %>
          <% else %>
            <% if @portfolio.following?(current_user) %>
              <%= button_to "Siguiendo", follow_path(@portfolio), method: "put", remote: true, class: 'portfolios-btn' %>
            <% else %>
              <%= button_to "S√≠gueme", follow_path(@portfolio), method: "put", remote: true, class: 'portfolios-btn' %>
            <% end %>
            <%= link_to 'Cont√°ctame', has_chat_path(:portfolio_id => @portfolio), method: "post", class: 'portfolios-btn' %>
          <% end %>
        <% end %>
      </div>

      <ul class="nav nav-pills mb-3 mt-5" id="pills-tab" role="tablist">
        <li class="nav-item" role="presentation">
          <button class="nav-link active" id="pills-home-tab" data-bs-toggle="pill" data-bs-target="#pills-home" type="button" role="tab" aria-controls="pills-home" aria-selected="true">Mis dise√±os</button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link" id="pills-profile-tab" data-bs-toggle="pill" data-bs-target="#pills-profile" type="button" role="tab" aria-controls="pills-profile" aria-selected="false">Perfil</button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link" id="pills-contact-tab" data-bs-toggle="pill" data-bs-target="#pills-contact" type="button" role="tab" aria-controls="pills-contact" aria-selected="false">Contacto</button>
        </li>
      </ul>
      <div class="tab-content" id="pills-tabContent">
        <div class="tab-pane fade show active" id="pills-home" role="tabpanel" aria-labelledby="pills-home-tab">
          <div class='auto-grid-designs'>
            <% @portfolio.designs.each do |design| %>
              <div class="card">
                <div class="img-container img-design" style="">
                  <% if design.photo.key %>
                    <%= cl_image_tag design.photo.key, crop: :fill %>
                  <% else %>
                    <%= image_tag "#{design.image}"%>
                  <% end %>
                </div>
                <div class="card-body">
                  <h5 class="card-title text-center"><%= design.title %></h5>
                  <p class="card-text text-center"><%= design.description %></p>
                  <p class="text-center">
                    <%= render "portfolios/votes_score", design: design, class: 'text-center' %>
                    <% if user_signed_in? %>
                      <%= render "portfolios/upvote_link", design: design, class: 'text-center' %>
                    <% else %>
                      <%= 'Likes' %>
                    <% end %>
                  </p>
                </div>
              </div>
            <% end %>
          </div>
        </div>
        <div class="tab-pane fade sobre-mi" id="pills-profile" role="tabpanel" aria-labelledby="pills-profile-tab">
          <h4>Sobre mi:</h4>
          <p style='font-size: 18px; text-align: justify'>Se puede decir que soy un tipo que ha
            tenido la suerte de trabajar en lo que le gusta y le apasiona estos √∫ltimos 25 a√±os de su vida.
            Soy egresado del Instituto Superior de Comunicaci√≥n Visual de Rosario con el t√≠tulo
            de Dise√±ador Gr√°fico. Realizo cursos, m√°steres para mejorar mi formaci√≥n y estar
            permanentemente actualizado en esta profesi√≥n tan cambiante. He tenido el privilegio
            de trabajar en empresas de diversos sectores como Parques Reunidos, Lanetro Zed,
            Recoletos Grupo de Comunicaci√≥n (Unidad Editorial), Publicis Dialog, Ahorro
            Corporaci√≥n Financiera entre otras. En la actualidad trabajo como freelance para
            clientes que con su confianza en mi trabajo me permiten continuar con mi desarrollo
            profesional.</p>
            <div class='perfil-cards'>
              <div class="card" style="width: 18rem;">
                <div class="card-body">
                  <h5 class="card-title">Mi experiencia</h5>
                  <p style='text-align: justify' class="card-text">Grupo Prima / Parques Reunidos / Lanetro Zed / Recoletos Grupo de Comunicaci√≥n / Publicis Dialog / Ahorro Corporaci√≥n Financiera / JOT Internet Media. Actualmente trabajo por mi cuenta como dise√±ador gr√°fico y web freelance.</p>
                </div>
              </div>
              <div class="card" style="width: 18rem;">
                <div class="card-body">
                  <h5 class="card-title">Mis conocimientos</h5>
                  <p style='text-align: justify' class="card-text">Photoshop / Illustrator / Dreamweaver / Flash / Fireworks / Indesign / Acrobat / Premiere/ Final Cut / HTML5 / CSS3 / WordPress / nociones de Actionscript, Javascript y PHP entre otros. Trabajo tanto en plataforma MAC (preferentemente) como en PC.</p>
                </div>
              </div>
              <div class="card" style="width: 18rem;">
                <div class="card-body">
                  <h5 class="card-title">M√°s informaci√≥n</h5>
                  <p style='text-align: justify' class="card-text">Te invito a descargar mi CV en formato PDF donde encontrar√°s en detalle toda mi experiencia y mi formaci√≥n.</p>
                  <button class='mt-5 btn btn-primary'>Descargar CV</button>
                </div>
                </div>
            </div>
          </div>
        <div class="tab-pane fade sobre-mi" id="pills-contact" role="tabpanel" aria-labelledby="pills-contact-tab">
          <h4>Tel√©fono:</h4>
          <p style='font-size: 18px'>‚Ä¢ <%= @portfolio.user.phone %></p>
          <h4>Correo electr√≥nico:</h4>
          <p style='font-size: 18px'>‚Ä¢ <%= @portfolio.user.email %></p>
        </div>
      </div>

    </div>


    <div class='reviews-show mt-5'>
    <br>
      <% if @portfolio.reviews.blank? %>
        <p><i class="far fa-comment-alt"></i>&nbsp; S√© el primero en dejar un comentario</p>
      <% else %>
        <h4 class="mb-3">Comentarios</h4>
        <% @portfolio.reviews.order('created_at DESC').each do |review| %>
          <div class="container-reviews">
            <div class="container-user">
              <div class="content-user">
                <figure class="m-0">
                  <%= image_tag "#{review.user.image}", width: 70, height: 70, class: 'img-fluid rounded-circle img-thumbnail shadow-sm img-user' %>
                </figure>
                <div class="ps-2">
                  <p class="m-0"><%= review.user.name %> <%= review.user.last_name %></p>
                  <p class="small text-muted m-0">
                    <% review.rating.times do  %>
                      <i class="fas fa-star" style='color: #FFCE00'></i>
                    <% end %>
                    <% review.blank_stars.times do %>
                      <i class="far fa-star" style='color: #FFCE00'></i>
                    <% end %> &nbsp;|&nbsp;
                    <%= review.created_at.utc.localtime("-05:00").strftime("%h %d, %Y - %I:%M %p") %>
                  </p>

                  <div class="content-body-review">
                    <div>
                      <h6 style="margin-bottom: 2px;"><%= review.title %></h6>
                      <p><%= review.content %></p>
                    </div>
                  </div>
                </div>
              </div>
              <div class="pe-3">
                <% if user_signed_in? && review.user == current_user %>
                  <%= link_to review_path(review, :portfolio_id => review.portfolio),
                    method: :delete,
                    class: 'product-remove rounded-circle btn',
                    style: 'background-color: #22223B; color: #fff;',
                    data: { confirm: "¬øEst√°s seguro?" } do %>
                    <i class="fas fa-trash"></i>
                  <% end %>
                <% end %>
              </div>
            </div>


          </div>
        <% end %>
      <% end %>
    </div>

    <% if user_signed_in? %>
      <hr>
      <div class='review-form'>
        <p class=''>Introduce tu comentario</p>
        <%= simple_form_for([ @portfolio, @review ], remote: true) do |f| %>
          <div class="flex-inputs">
            <%= f.input :title, placeholder: "Titulo", class: "m-2" %>
            <%= f.input :rating, placeholder: "Valoraci√≥n" %>
          </div>
          <div class="flex-inputs">
            <%= f.input :content, as: :text, placeholder: "Comentario",class: "m-2" %>
          </div>
          <div class='text-right'>
            <%= f.submit 'Agregar Comentario', class: 'btn btn-outline-primary button-digi-grafikka mb-3' %>
          </div>
        <% end %>
      </div>
    <% end %>

  </div>
</div>
